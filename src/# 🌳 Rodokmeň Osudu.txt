# üå≥ Rodokme≈à Osudu

> **Interakt√≠vny pr√≠beh kde ka≈æd√© rozhodnutie men√≠ tvoj osud a niet cesty sp√§≈•.**

[![Vite](https://img.shields.io/badge/Vite-5.4-646CFF?logo=vite)](https://vitejs.dev/)
[![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-F7DF1E?logo=javascript)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

---

## üìñ Obsah

- [Filozofia Projektu](#-filozofia-projektu)
- [Abecedn√° Logika](#-abecedn√°-logika---kƒæ√∫ƒç-k-jednoduchosti)
- [Hern√© Mechaniky](#-hern√©-mechaniky)
- [Technick√° Dokument√°cia](#-technick√°-dokument√°cia)
- [In≈°tal√°cia a Spustenie](#-in≈°tal√°cia-a-spustenie)
- [Tvorba Obsahu](#-tvorba-obsahu)
- [Pr√≠klady](#-pr√≠klady)
- [Roadmap](#-roadmap)

---

## üéØ Filozofia Projektu

### Prelomenie Bari√©r Komplexnosti

**Rodokme≈à Osudu** nie je klasick√° hra s jedn√Ωm pr√≠behom. Je to **experiment v neline√°rnom storytellingu** kde:

- ‚ùå **NIE JE** jeden line√°rny pr√≠beh na 10 hod√≠n
- ‚úÖ **JE** kr√°tky pr√≠beh na 15-30 min√∫t, ale s **500+ unik√°tnymi koncovkami**
- üå≥ Ka≈æd√© rozhodnutie vytv√°ra **nov√∫ vetvu reality**
- üîÑ Hra je urƒçen√° na **opakovan√© hranie** - ka≈æd√Ω playthrough odhaƒæuje nieƒço nov√©
- üìÇ **≈†trukt√∫ra s√∫borov = ≈°trukt√∫ra pr√≠behu** (prieƒçinky ako vetvy)
- ‚è© **Jednosmern√Ω tok ƒçasu** - medzi lok√°ciami niet n√°vratu
- üîÅ **Sluƒçky v lok√°ci√°ch** - zosta≈• v miestnosti pok√Ωm ≈•a ≈°tatistiky nedohn√∫
- üìä **≈†tatistiky ako limiter** - ka≈æd√° akcia m√° cenu (energia/zdravie/ƒças)

### Probl√©my s Existuj√∫cimi N√°strojmi

**Twine/Ink:**
- ‚úÖ Dobr√© pre textov√© pr√≠behy
- ‚ùå Slab√° podpora multim√©di√≠
- ‚ùå Graf uzlov sa st√°va chaotick√Ωm pri 100+ sc√©nach

**RPG Maker/Ren'Py:**
- ‚úÖ Bohat√© vizu√°lne mo≈ænosti
- ‚ùå Komplikovan√© pre neline√°rne pr√≠behy
- ‚ùå Vy≈æaduj√∫ programovanie pre komplexn√∫ logiku

**Rodokme≈à Osudu:**
- ‚úÖ JSON = jednoduch√©, ƒçitateƒæn√©, bez programovania
- ‚úÖ Pln√° podpora videa/obr√°zkov/zvuku
- ‚úÖ Prieƒçinky = vizu√°lny strom rozhodnut√≠
- ‚úÖ Jednosmernos≈• = ≈æiadny chaos sp√§tn√Ωch v√§zieb

---

## üî§ Abecedn√° Logika - Kƒæ√∫ƒç k Jednoduchosti

### Princ√≠p 1: Jednosmernos≈• MEDZI Lok√°ciami

**Ka≈æd√© p√≠smeno = ƒåasov√Ω bod v pr√≠behu, z ktor√©ho niet n√°vratu.**

```
A (R√°no v izbe) ‚Üí B (Kuchy≈àa) ‚Üí C (Chodba) ‚Üí D (Vonku) ‚Üí KONIEC
     ‚Üì               ‚Üì            ‚Üì           ‚Üì
     X               X            X           X
  NEMO≈ΩN√â        NEMO≈ΩN√â      NEMO≈ΩN√â     NEMO≈ΩN√â
  (sp√§≈•)         (sp√§≈•)       (sp√§≈•)      (sp√§≈•)
```

**Preƒço?**
1. **Eliminuje chaos:** Nemus√≠≈° rie≈°i≈• "ƒço ak hr√°ƒç ide A‚ÜíB‚ÜíA‚ÜíC‚ÜíB‚ÜíA"
2. **Zjednodu≈°uje tvorbu:** P√≠≈°e≈° len dopredu (A‚ÜíB‚ÜíC), nie sie≈• (A‚áÑB‚áÑC)
3. **Rozhodnutia maj√∫ v√°hu:** Raz od√≠de≈° = nen√°vrat = mus√≠≈° ≈æi≈• s d√¥sledkami
4. **Testovanie:** Staƒç√≠ prejs≈• A‚ÜíB‚ÜíC raz, nie 100√ó v≈°etky kombin√°cie n√°vratov

### Princ√≠p 2: Sluƒçky VN√öTRI Lok√°ci√≠

**V r√°mci jednej sc√©ny m√¥≈æe≈° zosta≈• donekoneƒçna... a≈æ k√Ωm ≈•a ≈°tatistiky nedohn√∫.**

```
B (Kuchy≈àa)
‚îú‚îÄ "Otvori≈• chladniƒçku" ‚Üí B (energia -2) ‚Üí B ‚Üí B ...
‚îú‚îÄ "Pozrie≈• von oknom" ‚Üí B (energia -1) ‚Üí B ‚Üí B ...
‚îî‚îÄ "Od√≠s≈•" ‚Üí C (Chodba) ‚úì PRECHOD ƒéALEJ
```

**V√Ωhody sluƒçiek:**
- üé≠ **Storytelling:** "Nerozhodnos≈•", "V√°hanie", "Strach √≠s≈• ƒèalej"
- üéÆ **Gameplay:** Hr√°ƒç si mus√≠ dobre premyslie≈• kedy pokraƒçova≈•
- üî¢ **Variabilita:** Rovnak√° lok√°cia = 10 r√¥znych sk√∫senost√≠ (podƒæa poƒçtu sluƒçiek)
- ‚öñÔ∏è **Prirodzen√Ω limit:** ≈†tatistiky (energia/zdravie) zaruƒçuj√∫ koniec

**Pr√≠klad:**
```
A01 (R√°no v posteli)
‚îú‚îÄ "Vsta≈•" ‚Üí B10 (Kuchy≈àa)
‚îî‚îÄ "Osta≈• le≈æa≈•" ‚Üí A01 (energia +5, ƒças +10 min)
   ‚îî‚îÄ "E≈°te chv√≠ƒæu" ‚Üí A01 (energia +3, ƒças +10 min)
      ‚îî‚îÄ "Vsta≈•" ‚Üí B10
      
Po 3. sluƒçke: ƒåas = 8:30
Po 6. sluƒçke: ƒåas = 9:00 ‚Üí AUTO ‚Üí B50_neskor_rano
   ‚îî‚îÄ "Zameskal si ≈°kolu!"
```

### Princ√≠p 3: Flexibiln√© ƒå√≠slovanie

**P√≠smeno = ƒåas≈• pr√≠behu, ƒå√≠slo = Varianta**

```
A01 = R√°no v izbe (be≈æn√Ω de≈à)
A02 = R√°no v izbe (po zlej noci)
A99 = R√°no v izbe (v√≠kend)
A105 = R√°no v izbe (≈°peci√°lna udalos≈•)
```

**V√Ωhody:**
- ‚úÖ Nemus√≠≈° premenov√°va≈• cel√Ω strom pri vlo≈æen√≠ novej vetvy
- ‚úÖ ƒå√≠sla m√¥≈æu ma≈• s√©mantick√Ω v√Ωznam (99 = alternat√≠va, 10-20 = rann√© varianty)
- ‚úÖ Nez√°visl√© vetvy nemusia ma≈• postupn√© ƒç√≠sla

**Pravidlo:** Zo sc√©ny `A*` m√¥≈æe≈° √≠s≈• len do `B*`, `C*`, `D*`, ... (nie sp√§≈• do `A*` z inej lok√°cie)

---

## üéÆ Hern√© Mechaniky

### ≈†tatistiky

**Tri hlavn√© atrib√∫ty (0-100):**

| Atrib√∫t | ƒåo ovplyv≈àuje | Ako sa men√≠ |
|---------|--------------|-------------|
| **Zdravie** | Fyzick√Ω stav | -10 pri zranen√≠, +20 po odpoƒçinku |
| **N√°lada** | Psychick√Ω stav | -5 pri strese, +10 pri radosti |
| **Energia** | Vyƒçerpanos≈• | -2 pri akcii, +5 pri oddychu |

**Game Over podmienky:**
- Ak√°koƒævek ≈°tatistika = 0 ‚Üí Automatick√Ω prechod na koncov√∫ sc√©nu
- Pr√≠klad: `energia = 0` ‚Üí `Z99_smrt_vyƒçerpan√≠m`

### Invent√°r

**Dynamick√Ω zoznam predmetov:**
- üîë Kƒæ√∫ƒçe, mapy, jedlo, zbrane, atƒè.
- Voƒæby m√¥≈æu vy≈æadova≈• predmety: `"podmienka": { "maPredmet": "kluc" }`
- Reakcie m√¥≈æu meni≈• invent√°r: `"pridatPredmet": "mapa"`, `"odobratPredmet": "kluc"`

### ƒåas

**Virtu√°lny ƒças plynie:**
- Zaƒçiatok: 2024-01-01 08:00
- Akcie pos√∫vaj√∫ ƒças: `"posunCasu": 15` (min√∫t)
- Auto-prechody pri deadlinoch: `"cas > 9:00"` ‚Üí neskor

### Podmienky Volieb

**Voƒæba sa zobraz√≠ len ak:**
```json
"podmienka": {
  "maPredmet": "kluc",           // Mus√≠ ma≈• kƒæ√∫ƒç
  "nesmieMat": "zbran",          // Nesmie ma≈• zbra≈à
  "statistika": "energia",       // Kontrola ≈°tatistiky
  "min": 30,                     // Min. 30 energie
  "max": 100                     // Max. 100 energie
}
```

**Bez splnenia podmienky = voƒæba sa nezobraz√≠.**

### Typy Sc√©n

#### **1. Auto Sc√©ny**
```json
{
  "type": "auto",
  "trvanie": 10,
  "dalsia": "rano"
}
```
- Video sa prehr√°, text sa vyp√≠≈°e
- Po `trvanie` sekund√°ch ‚Üí automatick√Ω prechod
- Bez interakcie hr√°ƒça (cutscenes, intro, outro)

#### **2. Manual Sc√©ny**
```json
{
  "type": "manual",
  "moznosti": [...]
}
```
- Video sa prehr√° ‚Üí loop sa opakuje
- Zobrazuj√∫ sa voƒæby
- Hr√°ƒç rozhoduje kedy pokraƒçova≈•

---

## üõ†Ô∏è Technick√° Dokument√°cia

### Architekt√∫ra

```
Rodokme≈à Osudu/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ pribeh/               # Obsah hry
‚îÇ       ‚îú‚îÄ‚îÄ intro.json        # Defin√≠cia sc√©ny
‚îÇ       ‚îú‚îÄ‚îÄ intro.mp4         # Hlavn√© video
‚îÇ       ‚îú‚îÄ‚îÄ loop-intro.mp4    # Loop anim√°cia
‚îÇ       ‚îú‚îÄ‚îÄ A01_VOL_B05.mp4   # Prechodov√° anim√°cia
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ A_rano/           # Prieƒçinok pre lok√°ciu A
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ rano.json
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ rano.mp4
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ loop-rano.mp4
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ B_kuchyna/        # Prieƒçinok pre lok√°ciu B
‚îÇ           ‚îú‚îÄ‚îÄ kuchyna.json
‚îÇ           ‚îú‚îÄ‚îÄ B05_VOL_B05_CHLAD.mp4  # Sluƒçka
‚îÇ           ‚îî‚îÄ‚îÄ B05_VOL_C12.mp4        # Prechod ƒèalej
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ engine.js             # Hern√° logika
‚îÇ   ‚îú‚îÄ‚îÄ ui.js                 # DOM manipul√°cia
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îú‚îÄ‚îÄ main.css          # Glob√°lne ≈°t√Ωly
‚îÇ       ‚îú‚îÄ‚îÄ menu.css          # Menu obrazovka
‚îÇ       ‚îú‚îÄ‚îÄ game.css          # Hern√° obrazovka
‚îÇ       ‚îî‚îÄ‚îÄ stats.css         # ≈†tatistiky a invent√°r
‚îÇ
‚îú‚îÄ‚îÄ index.html                # Vstupn√Ω bod
‚îú‚îÄ‚îÄ vite.config.js            # Vite konfigur√°cia
‚îî‚îÄ‚îÄ package.json              # Z√°vislosti
```

### Engine.js - Kƒæ√∫ƒçov√© Funkcie

#### **Cache Syst√©m**
```javascript
let mediaCache = new Map();           // Blob URL cache
let prebiehajucePreklady = new Map(); // Prevent duplicate fetches

async function ziskatAleboNacitatMedium(url) {
    // 1. Kontrola cache
    if (mediaCache.has(url)) return mediaCache.get(url);
    
    // 2. Kontrola prebiehaj√∫cich loadov
    if (prebiehajucePreklady.has(url)) {
        return prebiehajucePreklady.get(url);
    }
    
    // 3. Fetch a ulo≈æenie
    const blob = await fetch(url).then(r => r.blob());
    const blobUrl = URL.createObjectURL(blob);
    mediaCache.set(url, blobUrl);
    return blobUrl;
}

function vycistiatStaruCache() {
    if (mediaCache.size <= 50) return;
    
    // Vyma≈æ najstar≈°ie 30% m√©di√≠
    const entries = Array.from(mediaCache.entries());
    const toRemove = entries.slice(0, Math.floor(50 * 0.3));
    
    toRemove.forEach(([url, blobUrl]) => {
        URL.revokeObjectURL(blobUrl);  // Uvoƒæni pam√§≈•!
        mediaCache.delete(url);
    });
}
```

#### **Preload Syst√©m**
```javascript
async function pripravitMediaPreScenu(scena) {
    const urls = new Set();
    
    // Hlavn√© m√©di√° sc√©ny
    if (scena.media?.video) urls.add(scena.media.video);
    if (scena.media?.loop) urls.add(scena.media.loop);
    if (scena.media?.hudba) urls.add(scena.media.hudba);
    
    // Prechodov√© anim√°cie pre v≈°etky voƒæby
    scena.moznosti?.forEach(volba => {
        if (volba.id) {
            urls.add(`pribeh/${volba.id}.mp4`);
        }
    });
    
    // Batch loading (max 3 paralelne)
    const urlsArray = Array.from(urls);
    for (let i = 0; i < urlsArray.length; i += 3) {
        const batch = urlsArray.slice(i, i + 3);
        await Promise.allSettled(
            batch.map(url => ziskatAleboNacitatMedium(url))
        );
    }
}
```

#### **Hlavn√Ω Game Loop**
```javascript
async function vykreslitScenu(idSceny) {
    // 1. Preload m√©di√≠
    await pripravitMediaPreScenu(scena);
    
    // 2. Fade-out
    await zobrazitPrechodovyOverlay(800);
    
    // 3. Naƒç√≠taj m√©di√° (video, loop, hudba)
    await aktualizovatMediumSceny({
        typ: 'video',
        url: videoUrl,
        loop: loopUrl
    });
    
    // 4. Fade-in
    await skrytPrechodovyOverlay(800);
    
    // 5. Vyp√≠≈° text (s typing efektom)
    await vypisatText(scena.text, scena.trvanie || 5);
    
    // 6. Zobraz voƒæby (pre manual) alebo poƒçkaj (pre auto)
    if (scena.type === 'manual') {
        const dostupneVolby = scena.moznosti.filter(splnaVolbuPodmienky);
        zobrazitVolby(dostupneVolby, spracujVolbu);
    } else if (scena.type === 'auto') {
        setTimeout(() => {
            vykreslitScenu(scena.dalsia);
        }, scena.trvanie * 1000);
    }
}
```

### UI.js - Anim√°cie a DOM

#### **Typing Efekt**
```javascript
async function vypisatText(text, trvanie) {
    const casti = text.split('|');
    
    for (const cast of casti) {
        dom.textDisplay.textContent = '';
        
        // P√≠≈° znak po znaku
        for (const znak of cast) {
            dom.textDisplay.textContent += znak;
            await sleep(50); // 50ms medzi znakmi
        }
        
        await sleep((trvanie / casti.length) * 1000);
    }
}
```

#### **Anim√°cia Percent**
```javascript
async function animovatPercenta(element, od, do, trvanie) {
    const start = Date.now();
    
    return new Promise(resolve => {
        function animate() {
            const elapsed = Date.now() - start;
            const progress = Math.min(elapsed / trvanie, 1);
            
            const aktualnaHodnota = od + (do - od) * progress;
            element.textContent = `${Math.round(aktualnaHodnota)}%`;
            
            if (progress < 1) {
                requestAnimationFrame(animate);
            } else {
                resolve();
            }
        }
        animate();
    });
}
```

#### **Video Syst√©m s Loop**
```javascript
async function aktualizovatMediumSceny({ typ, url, loop }) {
    if (typ === 'video') {
        dom.sceneVideo.src = url;
        dom.sceneVideo.loop = false;
        dom.sceneVideo.style.display = 'block';
        
        // Po skonƒçen√≠ hlavn√©ho videa ‚Üí prepni na loop
        if (loop) {
            dom.sceneVideo.addEventListener('ended', () => {
                dom.sceneVideo.src = loop;
                dom.sceneVideo.loop = true;
                dom.sceneVideo.play();
            }, { once: true });
        }
        
        await dom.sceneVideo.play();
    }
}
```

### Form√°t JSON Sc√©ny

**Kompletn√Ω pr√≠klad:**
```json
{
  "id": "B05_kuchyna",
  "type": "manual",
  "text": "Si v kuchyni. | Slnko sviet√≠ cez okno. | ƒåo bude≈° robi≈•?",
  "media": {
    "video": "pribeh/B05_kuchyna/kuchyna.mp4",
    "loop": "pribeh/B05_kuchyna/loop-kuchyna.mp4",
    "hudba": "pribeh/B05_kuchyna/hudba.mp3",
    "obrazok": "pribeh/B05_kuchyna/fallback.jpg"
  },
  "trvanie": 5,
  "moznosti": [
    {
      "id": "B05_VOL_B05_CHLAD",
      "text": "Otvori≈• chladniƒçku",
      "podmienka": {
        "statistika": "energia",
        "min": 10
      },
      "reakcia": {
        "text": "V chladniƒçke je pr√°zdno...",
        "trvanie": 2,
        "efekty": {
          "energia": -5,
          "nalada": -2
        },
        "posunCasu": 5,
        "dalsia": "B05_kuchyna"
      }
    },
    {
      "id": "B05_VOL_C12",
      "text": "Da≈• si ra≈àajky",
      "podmienka": {
        "maPredmet": "jedlo"
      },
      "reakcia": {
        "text": "Vychutn√°va≈° si ra≈àajky...",
        "trvanie": 3,
        "efekty": {
          "energia": 20,
          "nalada": 10,
          "odobratPredmet": "jedlo"
        },
        "posunCasu": 15,
        "dalsia": "C12_jedalny_stol"
      }
    },
    {
      "id": "B05_VOL_D20",
      "text": "Opusti≈• kuchy≈àu",
      "reakcia": {
        "dalsia": "D20_chodba"
      }
    }
  ]
}
```

**Podporovan√© Vlastnosti:**

| Vlastnos≈• | Typ | Popis |
|-----------|-----|-------|
| `id` | string | Jedineƒçn√Ω identifik√°tor sc√©ny |
| `type` | "auto"\|"manual" | Auto = bez volieb, Manual = s voƒæbami |
| `text` | string | Text sc√©ny (oddeƒæ `\|` pre pauzy) |
| `media.video` | string | Cesta k hlavn√©mu videu |
| `media.loop` | string | Cesta k loop videu |
| `media.hudba` | string | Cesta k hudobnej stope |
| `media.obrazok` | string | Fallback obr√°zok |
| `trvanie` | number | Trvanie v sekund√°ch |
| `dalsia` | string | ID ƒèal≈°ej sc√©ny (pre auto) |
| `moznosti` | array | Pole volieb (pre manual) |

**Reakcia Voƒæby:**

| Vlastnos≈• | Typ | Popis |
|-----------|-----|-------|
| `text` | string | Text reakcie |
| `trvanie` | number | Trvanie v sekund√°ch |
| `efekty.zdravie` | number | Zmena zdravia (+/-) |
| `efekty.nalada` | number | Zmena n√°lady (+/-) |
| `efekty.energia` | number | Zmena energie (+/-) |
| `efekty.pridatPredmet` | string | Prida≈• predmet do invent√°ra |
| `efekty.odobratPredmet` | string | Odobra≈• predmet z invent√°ra |
| `posunCasu` | number | Posun ƒçasu v min√∫tach |
| `dalsia` | string | ID ƒèal≈°ej sc√©ny |

**Podmienky Voƒæby:**

| Vlastnos≈• | Typ | Popis |
|-----------|-----|-------|
| `maPredmet` | string | Vy≈æaduje predmet v invent√°ri |
| `nesmieMat` | string | Nesmie ma≈• predmet |
| `statistika` | string | N√°zov ≈°tatistiky ("zdravie"\|"nalada"\|"energia") |
| `min` | number | Minim√°lna hodnota ≈°tatistiky |
| `max` | number | Maxim√°lna hodnota ≈°tatistiky |

---

## üöÄ In≈°tal√°cia a Spustenie

### Po≈æiadavky

- **Node.js** 18+ ([Stiahnu≈•](https://nodejs.org/))
- **Git** ([Stiahnu≈•](https://git-scm.com/))

### In≈°tal√°cia

```bash
# 1. Klonuj repozit√°r
git clone https://github.com/tvoj-username/rodokmn-osudu.git
cd rodokmn-osudu

# 2. Nain≈°taluj z√°vislosti
npm install
```

### V√Ωvoj

```bash
# Spusti dev server s hot reload
npm run dev
```

Otvor [http://localhost:5173/](http://localhost:5173/) v prehliadaƒçi.

### Build

```bash
# Vytvor produkƒçn√∫ verziu
npm run build

# V√Ωstup v prieƒçinku dist/
```

### Preview Buildu

```bash
# Prezri si build lok√°lne
npm run preview
```

---

## üìñ Tvorba Obsahu

### 1. Vytvor Nov√∫ Sc√©nu

**S√∫bor:** `public/pribeh/C20_obchod/obchod.json`

```json
{
  "id": "C20_obchod",
  "type": "manual",
  "text": "Vch√°dza≈° do obchodu. | Reg√°ly s√∫ pln√© tovaru.",
  "media": {
    "video": "pribeh/C20_obchod/obchod.mp4",
    "loop": "pribeh/C20_obchod/loop-obchod.mp4",
    "hudba": "pribeh/C20_obchod/hudba.mp3"
  },
  "trvanie": 5,
  "moznosti": [
    {
      "id": "C20_VOL_C20_REGALY",
      "text": "Prech√°dza≈• sa medzi reg√°lmi",
      "reakcia": {
        "text": "Pozer√°≈° na tovar...",
        "trvanie": 2,
        "efekty": {
          "energia": -2,
          "nalada": 1
        },
        "posunCasu": 5,
        "dalsia": "C20_obchod"
      }
    },
    {
      "id": "C20_VOL_C20_KUPIT",
      "text": "K√∫pi≈• jedlo",
      "podmienka": {
        "maPredmet": "peniaze"
      },
      "reakcia": {
        "text": "Kupuje≈° jedlo za 5‚Ç¨.",
        "trvanie": 2,
        "efekty": {
          "odobratPredmet": "peniaze",
          "pridatPredmet": "jedlo",
          "nalada": 5
        },
        "posunCasu": 10,
        "dalsia": "C20_obchod"
      }
    },
    {
      "id": "C20_VOL_D30",
      "text": "Opusti≈• obchod",
      "reakcia": {
        "text": "Odch√°dza≈° z obchodu.",
        "trvanie": 1,
        "dalsia": "D30_ulica"
      }
    }
  ]
}
```

### 2. Pridaj M√©di√°

**≈†trukt√∫ra:**
```
pribeh/C20_obchod/
‚îú‚îÄ‚îÄ obchod.json                  # Defin√≠cia sc√©ny
‚îú‚îÄ‚îÄ obchod.mp4                   # Hlavn√° anim√°cia (3-10s)
‚îú‚îÄ‚îÄ loop-obchod.mp4              # Loop (2-5s, bez≈°vov√Ω)
‚îú‚îÄ‚îÄ hudba.mp3                    # Atmosf√©rick√° hudba
‚îú‚îÄ‚îÄ C20_VOL_C20_REGALY.mp4       # Sluƒçka: prech√°dzanie
‚îú‚îÄ‚îÄ C20_VOL_C20_KUPIT.mp4        # Sluƒçka: nakupovanie
‚îî‚îÄ‚îÄ C20_VOL_D30.mp4              # Prechod na ulicu
```

**Odpor√∫ƒçania:**
- **Hlavn√© video:** 1080p, 30 FPS, H.264, 5-10 MB
- **Loop video:** 720p, 30 FPS, bez≈°vov√Ω zaƒçiatok/koniec, 2-5 MB
- **Prechodov√© video:** 720p, kr√°tke (2-5s), dramatick√©
- **Hudba:** MP3, 128 kbps, loop-friendly

### 3. Prepoj z Predo≈°lej Sc√©ny

V `B10_kuchyna/kuchyna.json` pridaj voƒæbu:

```json
{
  "id": "B10_VOL_C20",
  "text": "√çs≈• do obchodu",
  "reakcia": {
    "text": "Oblieka≈° sa a odch√°dza≈°...",
    "trvanie": 2,
    "efekty": {
      "energia": -10
    },
    "posunCasu": 30,
    "dalsia": "C20_obchod"
  }
}
```

### 4. Vytvor Koncovku

**S√∫bor:** `public/pribeh/Z99_game_over/game_over.json`

```json
{
  "id": "Z99_game_over",
  "type": "auto",
  "text": "Tvoja energia klesla na nulu. | Pad√°≈° na zem... | KONIEC",
  "media": {
    "video": "pribeh/Z99_game_over/game_over.mp4",
    "hudba": "pribeh/Z99_game_over/sad_music.mp3"
  },
  "trvanie": 10
}
```

**Koncovky nemaj√∫ `dalsia` ani `moznosti` = koniec hry.**

---

## üí° Pr√≠klady

### Pr√≠klad 1: Sluƒçka a≈æ do Vyƒçerpania

```json
{
  "id": "A15_posteƒæ",
  "type": "manual",
  "text": "Le≈æ√≠≈° v posteli. Nechce sa ti vst√°va≈•.",
  "moznosti": [
    {
      "id": "A15_VOL_A15_ZOSTAT",
      "text": "Zosta≈• e≈°te chv√≠ƒæu",
      "reakcia": {
        "text": "Zatv√°ra≈° oƒçi a relaxuje≈°...",
        "trvanie": 2,
        "efekty": {
          "energia": 3,
          "nalada": 2,
          "posunCasu": 10
        },
        "dalsia": "A15_posteƒæ"
      }
    },
    {
      "id": "A15_VOL_B20",
      "text": "Koneƒçne vsta≈•",
      "reakcia": {
        "dalsia": "B20_izba_rano"
      }
    }
  ]
}
```

**Automatick√Ω Game Over:**
Engine kontroluje ≈°tatistiky po ka≈ædej reakcii. Keƒè `cas > 9:00`:

```javascript
// V engine.js (automaticky)
if (hernyStav.cas > new Date(2024, 0, 1, 9, 0)) {
    await vykreslitScenu('Z10_neskor_rano');
}
```

### Pr√≠klad 2: Podmienen√© Voƒæby

```json
{
  "id": "B30_dvere",
  "moznosti": [
    {
      "id": "B30_VOL_C40_KLUC",
      "text": "Otvori≈• kƒæ√∫ƒçom",
      "podmienka": {
        "maPredmet": "kluc"
      },
      "reakcia": {
        "text": "Dvere sa otv√°raj√∫...",
        "efekty": {
          "odobratPredmet": "kluc"
        },
        "dalsia": "C40_miestnost"
      }
    },
    {
      "id": "B30_VOL_C45_SILA",
      "text": "Vyrazi≈• silou",
      "podmienka": {
        "statistika": "energia",
        "min": 50
      },
      "reakcia": {
        "text": "Napn√∫≈° sa a vyraz√≠≈° dvere!",
        "efekty": {
          "energia": -30,
          "zdravie": -10
        },
        "dalsia": "C45_miestnost_rozbite_dvere"
      }
    },
    {
      "id": "B30_VOL_A25",
      "text": "Vr√°ti≈• sa",
      "reakcia": {
        "dalsia": "A25_chodba"
      }
    }
  ]
}
```

**V√Ωsledok:**
- Ak **m√°≈° kƒæ√∫ƒç** ‚Üí zobraz√≠ sa 3 voƒæby
- Ak **nem√°≈° kƒæ√∫ƒç, ale m√°≈° 50+ energie** ‚Üí 2 voƒæby (sila, vr√°ti≈• sa)
- Ak **nem√°≈° kƒæ√∫ƒç ani energiu** ‚Üí 1 voƒæba (vr√°ti≈• sa)

### Pr√≠klad 3: Vetvy s R√¥znou Hudbou

```json
// A01 - Optimistick√Ω de≈à
{
  "id": "A01_rano_dobry",
  "media": {
    "hudba": "pribeh/hudba/happy_morning.mp3"
  },
  "moznosti": [
    {
      "id": "A01_VOL_B10",
      "text": "√çs≈• do ≈°koly",
      "reakcia": { "dalsia": "B10_skola_nadej" }
    }
  ]
}

// A02 - Depres√≠vny de≈à
{
  "id": "A02_rano_zly",
  "media": {
    "hudba": "pribeh/hudba/sad_morning.mp3"
  },
  "moznosti": [
    {
      "id": "A02_VOL_B15",
      "text": "Sna≈æi≈• sa √≠s≈• do ≈°koly...",
      "reakcia": { "dalsia": "B15_skola_depresia" }
    }
  ]
}
```

---

## üé® Konvencie a Best Practices

### Pomenovanie S√∫borov

#### **Sc√©ny**
```
[PISMENO][CISLO]_[nazov_sceny]/
    ‚îú‚îÄ‚îÄ [nazov].json
    ‚îú‚îÄ‚îÄ [nazov].mp4
    ‚îú‚îÄ‚îÄ loop-[nazov].mp4
    ‚îî‚îÄ‚îÄ hudba.mp3
```

**Pr√≠klady:**
- `A01_rano_v_izbe/`
- `B05_kuchyna/`
- `Z99_game_over/`

#### **Prechodov√© Anim√°cie**
```
[OD]_VOL_[DO].mp4
[OD]_VOL_[DO]_[AKCIA].mp4  (pre sluƒçky s r√¥znymi anim√°ciami)
```

**Pr√≠klady:**
- `A01_VOL_B05.mp4` - z A01 do B05
- `B05_VOL_B05_CHLAD.mp4` - sluƒçka (otvorenie chladniƒçky)
- `B05_VOL_C12.mp4` - prechod z B05 do C12

### Pravidl√° Vetvenia

1. **Jednosmernos≈• medzi lok√°ciami:**
   - ‚úÖ `A ‚Üí B ‚Üí C ‚Üí D`
   - ‚ùå `B ‚Üí A` (sp√§≈• do inej lok√°cie)

2. **Sluƒçky vn√∫tri lok√°cie:**
   - ‚úÖ `B05 ‚Üí B05 ‚Üí B05` (v r√°mci tej istej sc√©ny)
   - ‚ö†Ô∏è Ka≈æd√° sluƒçka M√Å efekt (energia/ƒças/n√°lada)

3. **Koncovky:**
   - Sc√©ny `Z_*` s√∫ fin√°lne
   - Nemaj√∫ `dalsia` ani `moznosti`
   - Typ: `"auto"`

### Optimaliz√°cia M√©di√≠

**Video:**
```bash
# Kompresia (ffmpeg)
ffmpeg -i input.mp4 -vcodec h264 -acodec aac -b:v 2M -b:a 128k output.mp4

# Loop video (bez≈°vov√©)
ffmpeg -i input.mp4 -filter_complex "[0]reverse[r];[0][r]concat,loop=5:size=1" loop.mp4
```

**Audio:**
```bash
# MP3 kompresia
ffmpeg -i input.wav -codec:a libmp3lame -b:a 128k output.mp3
```

### Testovanie Sc√©n

**Checklist:**
- [ ] Sc√©na m√° jedineƒçn√© `id`
- [ ] Video existuje a hr√° sa
- [ ] Loop video sa bez≈°vovo opakuje
- [ ] Text nem√° preklepy
- [ ] Voƒæby maj√∫ spr√°vne `id` (form√°t `[OD]_VOL_[DO]`)
- [ ] Podmienky funguj√∫ (sk√∫s bez predmetu/≈°tatistiky)
- [ ] Efekty sa aplikuj√∫ (kontroluj ≈°tatistiky)
- [ ] Prechody ved√∫ na existuj√∫ce sc√©ny
- [ ] ≈Ωiadna sluƒçka bez efektov
- [ ] Game Over pri 0 ≈°tatistik√°ch

---

## üó∫Ô∏è Roadmap

### ‚úÖ Hotov√© (v1.0)
- [x] Z√°kladn√Ω engine (sc√©ny, voƒæby, efekty)
- [x] Cache syst√©m s automatick√Ωm ƒçisten√≠m
- [x] Preload m√©di√≠
- [x] ≈†tatistiky (zdravie, n√°lada, energia)
- [x] Invent√°r syst√©m
- [x] ƒåasov√Ω syst√©m
- [x] Podmienky volieb
- [x] Auto a Manual sc√©ny
- [x] Video/obrazok/hudba podpora
- [x] Typing efekt pre text
- [x] Anim√°cie ≈°tatist√≠k
- [x] Fade prechody
- [x] Responz√≠vny dizajn

### üöß V Pl√°ne (v1.1)
- [ ] Save/Load syst√©m (localStorage)
- [ ] Achievements syst√©m
- [ ] ≈†tatistiky hry (poƒçet playthrough, n√°v≈°t√≠ven√© sc√©ny)
- [ ] Gal√©ria koncoviek (unlock po z√≠skan√≠)
- [ ] Audio nastavenia (hlasitos≈• hudby/SFX)
- [ ] Titulky pre vide√°
- [ ] Mobiln√° verzia (touch controls)
- [ ] PWA (Progressive Web App) - offline hra

### üîÆ Bud√∫cnos≈• (v2.0)
- [ ] Editor sc√©n (vizu√°lne vytv√°ranie bez JSON)
- [ ] Export do APK/EXE
- [ ] Multiplayer rozhodnutia (hlasovanie)
- [ ] Procedur√°lne generovanie vetviev
- [ ] AI generovanie textov/vide√≠
- [ ] Steam/Itch.io integr√°cia

---

## üìä Matematika Projektu

### Exponenci√°lny Rast Obsahu

**Z√°kladn√© vetvenie:**
```
10 sc√©n √ó 2 voƒæby/sc√©nu = 2^10 = 1,024 koncoviek
```

**S sluƒçkami (priemer 3 sluƒçky/sc√©nu):**
```
10 sc√©n √ó 2 voƒæby √ó 3 varianty sluƒçiek = 2^10 √ó 3^10 = 60,466,176 ciest!
```

**S limitmi ≈°tatist√≠k (max 20 sluƒçiek celkovo):**
```
~5,000 re√°lnych unik√°tnych ciest
```

**Porovnanie s in√Ωmi hrami:**

| Hra | Typ | Dƒ∫≈æka | Replay Value | Obsah |
|-----|-----|-------|--------------|-------|
| **Klasick√© RPG** | Line√°rne | 50h | N√≠zke | 50h |
| **The Witcher 3** | Vetven√© | 100h | Stredn√© | 300h (v≈°etky cesty) |
| **Detroit: Become Human** | Silne vetven√© | 12h | Vysok√© | 1,000h (v≈°etky varianty) |
| **Rodokme≈à Osudu** | Exponenci√°lne vetven√© + sluƒçky | 30 min | Extr√©mne vysok√© | 2,500h (5,000 ciest √ó 30 min) |

### Praktick√Ω Pr√≠klad

**Jednoduch√Ω pr√≠beh s 5 sc√©nami:**

```
A (R√°no)
‚îú‚îÄ Voƒæba 1: Vsta≈• ‚Üí B (Kuchy≈àa)
‚îÇ  ‚îú‚îÄ Sluƒçka: Pozrie≈• do chladniƒçky (0-3√ó)
‚îÇ  ‚îú‚îÄ Voƒæba 1: Ra≈àajky ‚Üí C (Jedal≈àa)
‚îÇ  ‚îî‚îÄ Voƒæba 2: Preskoƒçi≈• ‚Üí D (≈†kola hladn√Ω)
‚îÇ
‚îî‚îÄ Voƒæba 2: Zosta≈• ‚Üí E (Neskor√© r√°no)
   ‚îî‚îÄ Sluƒçka: Le≈æa≈• (0-5√ó)
      ‚îî‚îÄ Auto ‚Üí F (Zame≈°kan√° ≈°kola)
```

**V√Ωsledok:**
- 2 hlavn√© vetvy (vsta≈• vs zosta≈•)
- B m√° 4 varianty (0-3 sluƒçky)
- E m√° 6 variantov (0-5 sluƒçiek)
- = **2 √ó (4 + 6) = 20 unik√°tnych playthrough**

**Z 5 sc√©n = 20 r√¥znych sk√∫senost√≠!**

---

## ü§ù Prispievanie

### Ako Prispie≈•

1. **Fork repozit√°r**
2. **Vytvor branch** (`git checkout -b nova-funkcia`)
3. **Commituj zmeny** (`git commit -m 'Pridan√° nov√° funkcia'`)
4. **Push do branch** (`git push origin nova-funkcia`)
5. **Otvor Pull Request**

### Pravidl√°

- ‚úÖ Dodr≈æuj existuj√∫ci coding style
- ‚úÖ Testuj zmeny pred commitom
- ‚úÖ Dokumentuj nov√© funkcie
- ‚úÖ ≈Ωiadne TODO koment√°re v produkƒçnom k√≥de
- ‚úÖ Dodr≈æuj abecedn√∫ logiku (A‚ÜíB‚ÜíC)

### N√°pady na Prispenie

- üìñ Nap√≠sa≈• nov√∫ vetvu pr√≠behu
- üé® Vytvori≈• nov√© vizu√°lne mot√≠vy (dark/light theme)
- üéµ Prida≈• nov√∫ hudobn√∫ stopu
- üêõ Opravi≈• bug
- üìù Vylep≈°i≈• dokument√°ciu
- üåê Prelo≈æi≈• do in√©ho jazyka

---

## üìÑ Licencia

MIT License

Copyright (c) 2024 Rodokme≈à Osudu

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

---

## üôè Poƒèakovanie

**Tento projekt vznikol z:**
- Frustr√°cie s existuj√∫cimi n√°strojmi (pr√≠li≈° zlo≈æit√© alebo pr√≠li≈° limitovan√©)
- T√∫≈æby po jednoduchosti s hƒ∫bkou
- Viere, ≈æe neline√°rny storytelling m√¥≈æe by≈• pr√≠stupn√Ω ka≈æd√©mu

**Kƒæ√∫ƒçov√© inov√°cie:**
1. üî§ **Abecedn√° jednosmernos≈•** - ≈æiadny chaos n√°vratov medzi lok√°ciami
2. üîÅ **Sluƒçky v lok√°ci√°ch** - nekoneƒçn√° hƒ∫bka v r√°mci jedn√©ho miesta
3. üìä **≈†tatistiky ako limiter** - prirodzen√© ukonƒçenie sluƒçiek
4. üìÇ **Prieƒçinky ako graf** - vizu√°lna organiz√°cia pr√≠behu

**Filozofia:**
> "Jednosmernos≈• nie je obmedzenie - je to oslobodenie.  
> Sluƒçky nie s√∫ chaos - s√∫ kontrolovan√° nekoneƒçnos≈•.  
> Jednoduchos≈• nie je slabos≈• - je to elegancia."

Vƒèaka tejto kombin√°cii m√¥≈æe≈° vytvori≈•:
- **500 koncoviek** bez 50,000 stavov
- **2,500 hod√≠n obsahu** z 50 hod√≠n tvorby
- **Nekoneƒçn√∫ znovuhrateƒænos≈•** z jednoduch√Ωch pravidiel

---

## üìû Kontakt

- **GitHub:** [github.com/tvoj-username/rodokmn-osudu](https://github.com/tvoj-username/rodokmn-osudu)
- **Issues:** [github.com/tvoj-username/rodokmn-osudu/issues](https://github.com/tvoj-username/rodokmn-osudu/issues)
- **Diskusie:** [github.com/tvoj-username/rodokmn-osudu/discussions](https://github.com/tvoj-username/rodokmn-osudu/discussions)

---

**Rodokme≈à Osudu** - Kde ka≈æd√© rozhodnutie je nov√Ωm pr√≠behom, niet cesty sp√§≈• medzi lok√°ciami, ale v ka≈ædej m√¥≈æe≈° zosta≈• pok√Ωm ≈•a ≈æivot nedoh√°≈àa. üå≥‚è©üîÅ

*"Your choices shape your destiny. There is no going back."*